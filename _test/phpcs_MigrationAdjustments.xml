<?xml version="1.0"?>
<ruleset name="Migration Adjustments for the DokuWiki Coding Standard Standard" namespace="DokuWiki\CS\Standard">
    <description>These are exceptions to the Coding Standard used for DokuWiki that are intended to be removed over time.</description>

    <!-- rules on top of PSR-12 -->
    <rule ref="./phpcs.xml">
        <!-- Rules with automatic fixes that we want to adhere to, but currently don't -->
        <exclude name="Generic.Formatting.DisallowMultipleStatements.SameLine"/>
        <exclude name="Generic.WhiteSpace.ScopeIndent.IncorrectExact"/>
        <exclude name="Generic.WhiteSpace.ScopeIndent.Incorrect"/>
        <exclude name="Generic.WhiteSpace.IncrementDecrementSpacing.SpaceAfterDecrement"/>
        <exclude name="Generic.WhiteSpace.IncrementDecrementSpacing.SpaceAfterIncrement"/>

        <exclude name="Squiz.WhiteSpace.ScopeClosingBrace.ContentBefore"/>
        <exclude name="Squiz.WhiteSpace.ScopeClosingBrace.Indent"/>
        <exclude name="Squiz.WhiteSpace.SuperfluousWhitespace.EndLine"/>

        <exclude name="PSR2.Classes.PropertyDeclaration.StaticBeforeVisibility"/>
        <exclude name="PSR2.ControlStructures.ControlStructureSpacing.SpacingAfterOpenBrace"/>
        <exclude name="PSR2.ControlStructures.ControlStructureSpacing.SpaceBeforeCloseBrace"/>
        <exclude name="PSR2.ControlStructures.ElseIfDeclaration.NotAllowed"/>
        <exclude name="PSR2.ControlStructures.SwitchDeclaration.BreakIndent"/>
        <exclude name="PSR2.ControlStructures.SwitchDeclaration.BreakNotNewLine"/>
        <exclude name="PSR2.ControlStructures.SwitchDeclaration.BodyOnNextLineCASE"/>
        <exclude name="PSR2.ControlStructures.SwitchDeclaration.SpaceBeforeColonDEFAULT"/>
        <exclude name="PSR2.ControlStructures.SwitchDeclaration.SpaceBeforeColonCASE"/>
        <exclude name="PSR2.Methods.FunctionClosingBrace.SpacingBeforeClose"/>
        <exclude name="PSR2.Methods.MethodDeclaration.StaticBeforeVisibility"/>
        <exclude name="PSR2.Namespaces.NamespaceDeclaration.BlankLineAfter"/>
        <exclude name="PSR2.Namespaces.UseDeclaration.SpaceAfterLastUse"/>

        <exclude name="PSR12.Classes.OpeningBraceSpace.Found"/>
        <exclude name="PSR12.Files.FileHeader.SpacingAfterBlock"/>
        <exclude name="PSR12.Operators.OperatorSpacing.NoSpaceBefore"/>
        <exclude name="PSR12.Operators.OperatorSpacing.NoSpaceAfter"/>
    </rule>

    <!-- for now we mix declarations and execution here (mostly for defines) -->
    <rule ref="PSR1.Files.SideEffects">
        <exclude-pattern>*/index.php</exclude-pattern>
        <exclude-pattern>*/inc/parserutils.php</exclude-pattern>
        <exclude-pattern>*/inc/mail.php</exclude-pattern>
        <exclude-pattern>*/inc/init.php</exclude-pattern>
        <exclude-pattern>*/inc/farm.php</exclude-pattern>
        <exclude-pattern>*/inc/fulltext.php</exclude-pattern>
        <exclude-pattern>*/inc/pluginutils.php</exclude-pattern>
        <exclude-pattern>*/inc/indexer.php</exclude-pattern>
        <exclude-pattern>*/inc/Mailer.class.php</exclude-pattern>
        <exclude-pattern>*/doku.php</exclude-pattern>
        <exclude-pattern>*/install.php</exclude-pattern>
        <exclude-pattern>*/inc/utf8.php</exclude-pattern>
        <exclude-pattern>*/feed.php</exclude-pattern>
        <exclude-pattern>*/inc/load.php</exclude-pattern>
        <exclude-pattern>*/bin/*.php</exclude-pattern>
        <exclude-pattern>*/lib/exe/*.php</exclude-pattern>
    </rule>

</ruleset>
